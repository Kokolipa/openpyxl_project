{"version":3,"file":"makeMergeProps.js","sourceRoot":"../src/","sources":["next/makeMergeProps.ts"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,GAAG,EAAE,MAAM,qBAAqB,CAAC;AAW1C;;;;;;GAMG;AACH,MAAM,CAAC,IAAM,cAAc,GAAG,UAA6B,OAA+B;IAA/B,wBAAA,EAAA,YAA+B;IACxF,IAAM,SAAS,kBAAO,CAAC,OAAO,CAAC,SAAS,IAAI,EAAE,CAAC,GAAE,OAAO,EAAC,CAAC;IAE1D,IAAM,UAAU,GAAG,UAAC,MAAyB;QAAE,kBAA8C;aAA9C,UAA8C,EAA9C,qBAA8C,EAA9C,IAA8C;YAA9C,iCAA8C;;QAC3F,KAAoB,UAAQ,EAAR,qBAAQ,EAAR,sBAAQ,EAAR,IAAQ,EAAE;YAAzB,IAAM,KAAK,iBAAA;YACd,IAAI,KAAK,EAAE;gBACT,KAAuB,UAAkB,EAAlB,KAAA,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAlB,cAAkB,EAAlB,IAAkB,EAAE;oBAAtC,IAAM,QAAQ,SAAA;oBACjB,IAAM,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;oBAClC,IAAM,aAAa,GAAG,OAAO,SAAS,CAAC;oBAEvC,IAAI,SAAS,KAAK,SAAS,EAAE;wBAC3B,IAAI,SAAS,IAAI,aAAa,KAAK,QAAQ,EAAE;4BAC3C,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;gCAC5B,uBAAuB;gCACvB,MAAM,CAAC,QAAQ,CAAC,GAAG,SAAS,CAAC;6BAC9B;iCAAM;gCACL,MAAM,CAAC,QAAQ,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;gCAE1C,IACE,OAAO,MAAM,CAAC,QAAQ,CAAC,KAAK,QAAQ;oCACpC,KAAK,CAAC,cAAc,CAAC,SAAS,CAAC;oCAC/B,CAAC,SAAS,IAAI,OAAO,SAAS,KAAK,QAAQ,IAAI,SAAS,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;oCACnF,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAClC;oCACA,yEAAyE;oCACzE,MAAM,CAAC,QAAQ,CAAC,GAAG,SAAS,CAAC;iCAC9B;qCAAM;oCACL,mBAAmB;oCACnB,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC;iCACzC;6BACF;yBACF;6BAAM,IAAI,QAAQ,KAAK,WAAW,EAAE;4BACnC,IAAI,SAAS,EAAE;gCACb,yBAAyB;gCACzB,MAAM,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,SAAS,CAAC,CAAC;6BACrD;yBACF;6BAAM;4BACL,MAAM,CAAC,QAAQ,CAAC,GAAG,SAAS,CAAC;yBAC9B;qBACF;iBACF;aACF;SACF;QACD,OAAO,MAAgB,CAAC;IAC1B,CAAC,CAAC;IAEF,OAAO,UAAU,CAAC;AACpB,CAAC,CAAC","sourcesContent":["import * as React from 'react';\nimport { css } from '@uifabric/utilities';\nimport { GenericDictionary } from './types';\n\nexport type MergePropsOptions = {\n  /**\n   * A list of props to deep merge. By default, `style` will\n   * always be deep merged so it's not required to be provided.\n   */\n  deepMerge?: string[];\n};\n\n/**\n * Helper which deep clones props, but respectively assigns JSX, object refs, and class names\n * appropriately.\n *\n * @param target - the target object to merge onto.\n * @param propSets - one or more prop sets to deep merge onto the target.\n */\nexport const makeMergeProps = <TState = GenericDictionary>(options: MergePropsOptions = {}) => {\n  const deepMerge = [...(options.deepMerge || []), 'style'];\n\n  const mergeProps = (target: GenericDictionary, ...propSets: (GenericDictionary | undefined)[]): TState => {\n    for (const props of propSets) {\n      if (props) {\n        for (const propName of Object.keys(props)) {\n          const propValue = props[propName];\n          const propValueType = typeof propValue;\n\n          if (propValue !== undefined) {\n            if (propValue && propValueType === 'object') {\n              if (Array.isArray(propValue)) {\n                // for arrays, replace.\n                target[propName] = propValue;\n              } else {\n                target[propName] = target[propName] || {};\n\n                if (\n                  typeof target[propName] !== 'object' ||\n                  React.isValidElement(propValue) ||\n                  (propValue && typeof propValue === 'object' && propValue.hasOwnProperty('current')) ||\n                  deepMerge.indexOf(propName) === -1\n                ) {\n                  // if target is not an object, or value is JSX,  or a ref object, replace\n                  target[propName] = propValue;\n                } else {\n                  // else deep merge.\n                  mergeProps(target[propName], propValue);\n                }\n              }\n            } else if (propName === 'className') {\n              if (propValue) {\n                // for classnames, append\n                target[propName] = css(target[propName], propValue);\n              }\n            } else {\n              target[propName] = propValue;\n            }\n          }\n        }\n      }\n    }\n    return target as TState;\n  };\n\n  return mergeProps;\n};\n"]}